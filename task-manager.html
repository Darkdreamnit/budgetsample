<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GYTHNW4T2S"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GYTHNW4T2S');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <title>Event Budget Sample | Professional Event Cost Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.19.3/package/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.19.3/package/dist/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
</head>
<body class="bg-gray-50 min-h-screen">
   

    <!-- Header -->
    <header class="gradient-bg text-white">
        <div class="container mx-auto px-4 py-8">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-money-bill-wave text-3xl"></i>
                    <h2 class="text-2xl font-bold">Event Budget Sample</h2>
                </div>
                <nav class="hidden md:flex space-x-6">
                    <a href="index.html" class="hover:text-indigo-200 transition">Home</a>
                    <a href="calculator.html" class="hover:text-indigo-200 transition">Calculator</a>
                    <a href="contact.html" class="hover:text-indigo-200 transition">Contact</a>
                    <a href="resources.html" class="hover:text-indigo-200 transition">Resources</a>
                </nav>
                <button id="mobileMenuButton" class="md:hidden text-xl">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div id="mobileMenu" class="mobile-menu md:hidden bg-indigo-700 rounded-lg mt-4">
                <div class="flex flex-col space-y-3 p-4">
                    <a href="index.html" class="hover:text-indigo-200 transition">Home</a>
                    <a href="calculator.html" class="hover:text-indigo-200 transition">Calculator</a>
                    <a href="guest-list-manager.html" class="hover:text-indigo-200 transition">Guest List Manager</a>
                    <a href="event-checklist-generator.html" class="hover:text-indigo-200 transition">Event Checklist Generator</a>
                    <a href="resources.html" class="hover:text-indigo-200 transition">Resources</a>
                    <a href="contact.html" class="hover:text-indigo-200 transition">Contact</a>
                </div>
            </div>

            <div class="mt-16 mb-20 text-center">
                <h2 class="text-4xl md:text-5xl font-bold mb-4">Professional Event Budget Calculator</h2>
                <p class="text-xl md:text-2xl max-w-3xl mx-auto">Use our calculator to plan with precision using our industry-standard budgeting tool</p>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-4 lg:py-8">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Desktop Sidebar -->
            <aside class="lg:w-1/4 bg-white p-6 rounded-xl shadow-md h-fit lg:sticky lg:top-8 desktop-menu">
                <h2 class="text-xl font-semibold mb-6 text-indigo-700">Quick Actions</h2>
                <ul class="space-y-3">
                    <li>
                        <button onclick="showAllTasks()" class="w-full text-left px-4 py-2 rounded-lg hover:bg-indigo-50 text-indigo-600 font-medium transition">
                            <i class="fas fa-tasks mr-2"></i>All Tasks
                        </button>
                    </li>
                    <li>
                        <button onclick="filterTasks('pending')" class="w-full text-left px-4 py-2 rounded-lg hover:bg-indigo-50 text-indigo-600 transition">
                            <i class="fas fa-hourglass-half mr-2"></i>Pending
                        </button>
                    </li>
                    <li>
                        <button onclick="filterTasks('in-progress')" class="w-full text-left px-4 py-2 rounded-lg hover:bg-indigo-50 text-indigo-600 transition">
                            <i class="fas fa-spinner mr-2"></i>In Progress
                        </button>
                    </li>
                    <li>
                        <button onclick="filterTasks('completed')" class="w-full text-left px-4 py-2 rounded-lg hover:bg-indigo-50 text-indigo-600 transition">
                            <i class="fas fa-check-circle mr-2"></i>Completed
                        </button>
                    </li>
                    <li>
                        <button onclick="filterTasks('overdue')" class="w-full text-left px-4 py-2 rounded-lg hover:bg-indigo-50 text-indigo-600 transition">
                            <i class="fas fa-exclamation-triangle mr-2"></i>Overdue
                        </button>
                    </li>
                </ul>

                <div class="mt-8 pt-6 border-t border-gray-200">
                    <h3 class="font-medium text-gray-700 mb-3">Team Members</h3>
                    <button onclick="openAddMemberModal()" class="w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition flex items-center justify-center">
                        <i class="fas fa-user-plus mr-2"></i> Add Member
                    </button>
                </div>

                <div class="mt-8 pt-6 border-t border-gray-200">
                    <h3 class="font-medium text-gray-700 mb-3">Data Management</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="exportData('excel')" class="bg-green-600 text-white py-2 px-3 rounded-lg hover:bg-green-700 transition flex items-center justify-center text-sm">
                            <i class="fas fa-file-export mr-2"></i> Export
                        </button>
                        <button onclick="importData()" class="bg-blue-600 text-white py-2 px-3 rounded-lg hover:bg-blue-700 transition flex items-center justify-center text-sm">
                            <i class="fas fa-file-import mr-2"></i> Import
                        </button>
                        <button onclick="confirmResetData()" class="bg-red-600 text-white py-2 px-3 rounded-lg hover:bg-red-700 transition flex items-center justify-center text-sm col-span-2">
                            <i class="fas fa-trash-alt mr-2"></i> Reset All Data
                        </button>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <div class="lg:w-3/4">
                <!-- Tasks Section -->
                <div id="tasks-section" class="bg-white p-6 rounded-xl shadow-md mb-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl lg:text-2xl font-bold text-gray-800">Team Tasks</h2>
                        <button onclick="openAddTaskModal()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition flex items-center">
                            <i class="fas fa-plus mr-2"></i> Add Task
                        </button>
                    </div>

                    <div class="mb-6">
                        <div class="flex justify-between mb-2">
                            <span class="font-medium">Task Completion</span>
                            <span id="completion-percentage" class="font-medium">0%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5">
                            <div id="progress-bar" class="progress-bar bg-indigo-600 h-2.5 rounded-full" style="width: 0%"></div>
                        </div>
                    </div>

                    <div id="task-filters" class="flex flex-wrap gap-2 mb-6">
                        <button onclick="showAllTasks()" class="px-3 py-1 rounded-full bg-indigo-100 text-indigo-700 text-sm font-medium">All</button>
                        <button onclick="filterTasks('pending')" class="px-3 py-1 rounded-full bg-yellow-100 text-yellow-700 text-sm font-medium">Pending</button>
                        <button onclick="filterTasks('in-progress')" class="px-3 py-1 rounded-full bg-blue-100 text-blue-700 text-sm font-medium">In Progress</button>
                        <button onclick="filterTasks('completed')" class="px-3 py-1 rounded-full bg-green-100 text-green-700 text-sm font-medium">Completed</button>
                        <button onclick="filterTasks('overdue')" class="px-3 py-1 rounded-full bg-red-100 text-red-700 text-sm font-medium">Overdue</button>
                        <button onclick="filterTasks('high')" class="px-3 py-1 rounded-full bg-red-100 text-red-700 text-sm font-medium">High Priority</button>
                        <button onclick="filterTasks('medium')" class="px-3 py-1 rounded-full bg-yellow-100 text-yellow-700 text-sm font-medium">Medium Priority</button>
                        <button onclick="filterTasks('low')" class="px-3 py-1 rounded-full bg-green-100 text-green-700 text-sm font-medium">Low Priority</button>
                    </div>

                    <div id="duplicate-warning" class="duplicate-warning hidden">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span id="warning-message"></span>
                    </div>

                    <div id="tasks-container" class="space-y-3">
                        <!-- Tasks will be loaded here by JavaScript -->
                    </div>
                </div>

                <!-- Team Members Section -->
                <div id="team-section" class="bg-white p-6 rounded-xl shadow-md mb-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl lg:text-2xl font-bold text-gray-800">Team Members</h2>
                        <div class="text-gray-500">
                            <span id="member-count">0</span> members
                        </div>
                    </div>

                    <div id="members-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- Team members will be loaded here by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Add Task Modal -->
    <div id="add-task-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4 slide-in">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="task-modal-title">Add New Task</h3>
                <button onclick="closeAddTaskModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="space-y-4">
                <div>
                    <label class="block text-gray-700 mb-1">Task Name</label>
                    <input type="text" id="task-name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>

                <div>
                    <label class="block text-gray-700 mb-1">Description</label>
                    <textarea id="task-description" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" rows="3"></textarea>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-gray-700 mb-1">Due Date</label>
                        <input type="date" id="task-due-date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>

                    <div>
                        <label class="block text-gray-700 mb-1">Priority</label>
                        <select id="task-priority" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="block text-gray-700 mb-1">Status</label>
                    <select id="task-status" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        <option value="pending">Pending</option>
                        <option value="in-progress">In Progress</option>
                        <option value="completed">Completed</option>
                    </select>
                </div>

                <div>
                    <label class="block text-gray-700 mb-1">Assigned To</label>
                    <select id="task-assigned-to" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        <!-- Members will be loaded here -->
                    </select>
                </div>
            </div>

            <div class="mt-6 flex justify-end space-x-3">
                <button onclick="closeAddTaskModal()" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition">Cancel</button>
                <button onclick="confirmAddTask()" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition">Save Task</button>
            </div>
        </div>
    </div>

    <!-- Add Member Modal -->
    <div id="add-member-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4 slide-in">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="member-modal-title">Add New Member</h3>
                <button onclick="closeAddMemberModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="space-y-4">
                <div>
                    <label class="block text-gray-700 mb-1">Full Name</label>
                    <input type="text" id="member-name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>

                <div>
                    <label class="block text-gray-700 mb-1">Email</label>
                    <input type="email" id="member-email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>

                <div>
                    <label class="block text-gray-700 mb-1">Role</label>
                    <select id="member-role" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        <option value="member">Member</option>
                        <option value="manager">Manager</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>

                <div>
                    <label class="block text-gray-700 mb-1">Profile Color</label>
                    <div class="flex space-x-2">
                        <div class="w-8 h-8 rounded-full bg-indigo-500 cursor-pointer border-2 border-transparent hover:border-gray-300" onclick="selectMemberColor('indigo')"></div>
                        <div class="w-8 h-8 rounded-full bg-blue-500 cursor-pointer border-2 border-transparent hover:border-gray-300" onclick="selectMemberColor('blue')"></div>
                        <div class="w-8 h-8 rounded-full bg-green-500 cursor-pointer border-2 border-transparent hover:border-gray-300" onclick="selectMemberColor('green')"></div>
                        <div class="w-8 h-8 rounded-full bg-yellow-500 cursor-pointer border-2 border-transparent hover:border-gray-300" onclick="selectMemberColor('yellow')"></div>
                        <div class="w-8 h-8 rounded-full bg-red-500 cursor-pointer border-2 border-transparent hover:border-gray-300" onclick="selectMemberColor('red')"></div>
                        <div class="w-8 h-8 rounded-full bg-purple-500 cursor-pointer border-2 border-transparent hover:border-gray-300" onclick="selectMemberColor('purple')"></div>
                    </div>
                    <input type="hidden" id="member-color" value="indigo">
                </div>
            </div>

            <div class="mt-6 flex justify-end space-x-3">
                <button onclick="closeAddMemberModal()" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition">Cancel</button>
                <button onclick="confirmAddMember()" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition">Save Member</button>
            </div>
        </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div id="confirm-delete-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4 slide-in">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Confirm Deletion</h3>
                <button onclick="closeConfirmDeleteModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <p class="mb-6" id="delete-confirmation-message">Are you sure you want to delete this item?</p>

            <div class="flex justify-end space-x-3">
                <button onclick="closeConfirmDeleteModal()" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition">Cancel</button>
                <button onclick="executeDelete()" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition">Delete</button>
            </div>
        </div>
    </div>

    <!-- Import Data Modal -->
    <div id="import-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4 slide-in">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Import Data</h3>
                <button onclick="closeImportModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="mb-4">
                <label class="block text-gray-700 mb-2">Select JSON file to import:</label>
                <input type="file" id="import-file" accept=".json" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>

            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
                <div class="flex">
                    <div class="flex-shrink-0">
                        <i class="fas fa-exclamation-triangle text-yellow-400"></i>
                    </div>
                    <div class="ml-3">
                        <p class="text-sm text-yellow-700">
                            Importing data will replace all current tasks and members. Make sure to export your current data first if you want to keep it.
                        </p>
                    </div>
                </div>
            </div>

            <div class="flex justify-end space-x-3">
                <button onclick="closeImportModal()" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition">Cancel</button>
                <button onclick="processImport()" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition">Import</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
     <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <!-- Column 1 -->
                <div>
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <i class="fas fa-money-bill-wave mr-2"></i>
                        Event Budget Sample
                    </h3>
                    <p class="text-gray-400">Choice of professionals for accurate event budgeting since 2025.</p>
                </div>

                <!-- Column 2 -->
                <div>
                    <h4 class="font-bold mb-4">Resources</h4>
                    <ul class="space-y-2">
                        <li><a href="how-to-make-a-budget-for-an-event.html" class="text-gray-400 hover:text-white transition">How to make a budget for an event</a></li>
                       
                    </ul>
                </div>

                <!-- Column 3 -->
                <div>
                    <h4 class="font-bold mb-4">Company</h4>
                    <ul class="space-y-2">
                        <li><a href="about-us.html" class="text-gray-400 hover:text-white transition">About Us</a></li>
                       
                    </ul>
                </div>

                <!-- Column 4 -->
                <div>
                    <h4 class="font-bold mb-4">Contact</h4>
                    <ul class="space-y-2">
                        <li class="flex items-center">
                            <i class="fas fa-envelope mr-2 text-gray-400"></i>
                            <a href="mailto:hello@eventbudgetpro.com" class="text-gray-400 hover:text-white transition">eventbudgetsample@gmail.com</a>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-phone mr-2 text-gray-400"></i>
                            <a href="tel:+18005551234" class="text-gray-400 hover:text-white transition">(757) 949-4621</a>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-map-marker-alt mr-2 text-gray-400"></i>
                            <span class="text-gray-400">Virginia Beach, VA</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2025 Event Budget Sample. All rights reserved.</p>
            </div>
        </div>
    </footer>
    <script src="index.js"></script>

    <script>
        // Initialize jsPDF
        const { jsPDF } = window.jspdf;

        // Sample data structure
        let tasks = [
            {
                id: 1,
                name: "Design Homepage",
                description: "Create wireframes and mockups for the new homepage design",
                dueDate: "2023-12-15",
                priority: "high",
                status: "in-progress",
                assignedTo: 1,
                createdAt: new Date().toISOString()
            },
            {
                id: 2,
                name: "Implement Authentication",
                description: "Set up user authentication with JWT tokens",
                dueDate: "2023-12-10",
                priority: "medium",
                status: "pending",
                assignedTo: 2,
                createdAt: new Date().toISOString()
            },
            {
                id: 3,
                name: "Write Documentation",
                description: "Document API endpoints and usage examples",
                dueDate: "2023-12-05",
                priority: "low",
                status: "completed",
                assignedTo: 3,
                createdAt: new Date().toISOString()
            }
        ];

        let members = [
            {
                id: 1,
                name: "John Doe",
                email: "john@example.com",
                role: "admin",
                color: "indigo",
                createdAt: new Date().toISOString()
            },
            {
                id: 2,
                name: "Jane Smith",
                email: "jane@example.com",
                role: "manager",
                color: "blue",
                createdAt: new Date().toISOString()
            },
            {
                id: 3,
                name: "Mike Johnson",
                email: "mike@example.com",
                role: "member",
                color: "green",
                createdAt: new Date().toISOString()
            }
        ];

        // Current state
        let currentFilter = 'all';
        let currentlyEditingTaskId = null;
        let currentlyEditingMemberId = null;
        let deleteAction = null;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            loadTasks();
            loadMembers();
            updateCompletionPercentage();
            
            // Mobile menu toggle
            document.getElementById('mobileMenuButton').addEventListener('click', function() {
                const menu = document.getElementById('mobileMenu');
                menu.classList.toggle('hidden');
            });
        });

        // Load tasks based on filter
        function loadTasks() {
            const container = document.getElementById('tasks-container');
            container.innerHTML = '';

            let filteredTasks = [];
            
            switch(currentFilter) {
                case 'all':
                    filteredTasks = [...tasks];
                    break;
                case 'pending':
                    filteredTasks = tasks.filter(t => t.status === 'pending');
                    break;
                case 'in-progress':
                    filteredTasks = tasks.filter(t => t.status === 'in-progress');
                    break;
                case 'completed':
                    filteredTasks = tasks.filter(t => t.status === 'completed');
                    break;
                case 'overdue':
                    filteredTasks = tasks.filter(t => {
                        if (t.status === 'completed') return false;
                        const dueDate = new Date(t.dueDate);
                        const today = new Date();
                        today.setHours(0, 0, 0, 0);
                        return dueDate < today;
                    });
                    break;
                case 'high':
                    filteredTasks = tasks.filter(t => t.priority === 'high');
                    break;
                case 'medium':
                    filteredTasks = tasks.filter(t => t.priority === 'medium');
                    break;
                case 'low':
                    filteredTasks = tasks.filter(t => t.priority === 'low');
                    break;
                default:
                    filteredTasks = [...tasks];
            }

            if (filteredTasks.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-10">
                        <i class="fas fa-tasks text-4xl text-gray-400 mb-4"></i>
                        <h3 class="text-xl font-medium text-gray-600">No tasks found</h3>
                        <p class="text-gray-500 mt-2">Try selecting a different filter or create a new task.</p>
                    </div>
                `;
                return;
            }

            // Sort tasks by due date (soonest first)
            filteredTasks.sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate));

            filteredTasks.forEach(task => {
                const taskElement = document.createElement('div');
                taskElement.className = `task-item bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-start task-priority-${task.priority}`;
                
                const assignedMember = members.find(m => m.id === task.assignedTo);
                const memberColor = assignedMember ? `bg-${assignedMember.color}-500` : 'bg-gray-500';
                
                taskElement.innerHTML = `
                    <div class="flex-1">
                        <div class="flex items-start justify-between mb-2">
                            <h3 class="font-medium text-gray-800">${task.name}</h3>
                            <span class="text-xs px-2 py-1 rounded-full ${getPriorityClass(task.priority)} ml-2">
                                ${formatPriority(task.priority)}
                            </span>
                        </div>
                        <p class="text-sm text-gray-600 mb-2">${task.description || 'No description'}</p>
                        <div class="flex items-center text-sm text-gray-500">
                            <i class="far fa-calendar-alt mr-1"></i>
                            <span>Due: ${formatDate(task.dueDate)}</span>
                        </div>
                    </div>
                    <div class="flex items-center ml-4">
                        <div class="w-10 h-10 rounded-full ${memberColor} flex items-center justify-center text-white font-medium text-sm mr-3">
                            ${assignedMember ? assignedMember.name.charAt(0).toUpperCase() : '?'}
                        </div>
                        <div class="flex flex-col space-y-1">
                            <button onclick="editTask(${task.id})" class="text-gray-400 hover:text-indigo-600">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="confirmDeleteTask(${task.id})" class="text-gray-400 hover:text-red-600">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                container.appendChild(taskElement);
            });
        }

        // Load members
        function loadMembers() {
            const container = document.getElementById('members-container');
            container.innerHTML = '';

            document.getElementById('member-count').textContent = members.length;

            if (members.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full text-center py-10">
                        <i class="fas fa-users text-4xl text-gray-400 mb-4"></i>
                        <h3 class="text-xl font-medium text-gray-600">No team members</h3>
                        <p class="text-gray-500 mt-2">Add your first team member to get started.</p>
                    </div>
                `;
                return;
            }

            members.forEach(member => {
                const memberElement = document.createElement('div');
                memberElement.className = `member-card bg-white border border-gray-200 rounded-lg p-4 shadow-sm`;
                
                memberElement.innerHTML = `
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-full bg-${member.color}-500 flex items-center justify-center text-white font-medium text-lg mr-3">
                                ${member.name.charAt(0).toUpperCase()}
                            </div>
                            <div>
                                <h3 class="font-medium">${member.name}</h3>
                                <p class="text-sm text-gray-500">${member.email}</p>
                            </div>
                        </div>
                        <span class="text-xs px-2 py-1 rounded-full ${getRoleClass(member.role)}">
                            ${formatRole(member.role)}
                        </span>
                    </div>
                    <div class="flex justify-between items-center text-sm">
                        <div>
                            <span class="font-medium">${countTasksAssigned(member.id)}</span>
                            <span class="text-gray-500">tasks assigned</span>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="editMember(${member.id})" class="text-gray-400 hover:text-indigo-600">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="confirmDeleteMember(${member.id})" class="text-gray-400 hover:text-red-600">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                container.appendChild(memberElement);
            });
        }

        // Count tasks assigned to a member
        function countTasksAssigned(memberId) {
            return tasks.filter(t => t.assignedTo === memberId).length;
        }

        // Get priority class
        function getPriorityClass(priority) {
            const classes = {
                high: 'bg-red-100 text-red-800',
                medium: 'bg-yellow-100 text-yellow-800',
                low: 'bg-green-100 text-green-800'
            };
            return classes[priority] || classes.low;
        }

        // Format priority
        function formatPriority(priority) {
            const formats = {
                high: 'High',
                medium: 'Medium',
                low: 'Low'
            };
            return formats[priority] || priority;
        }

        // Get role class
        function getRoleClass(role) {
            const classes = {
                admin: 'bg-purple-100 text-purple-800',
                manager: 'bg-blue-100 text-blue-800',
                member: 'bg-gray-100 text-gray-800'
            };
            return classes[role] || classes.member;
        }

        // Format role
        function formatRole(role) {
            const formats = {
                admin: 'Admin',
                manager: 'Manager',
                member: 'Member'
            };
            return formats[role] || role;
        }

        // Format date
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }

        // Update completion percentage
        function updateCompletionPercentage() {
            const totalTasks = tasks.length;
            const completedTasks = tasks.filter(t => t.status === 'completed').length;
            const percentage = totalTasks > 0 ? (completedTasks / totalTasks) * 100 : 0;
            
            document.getElementById('progress-bar').style.width = `${percentage}%`;
            document.getElementById('completion-percentage').textContent = `${Math.round(percentage)}%`;
        }

        // Filter tasks
        function filterTasks(filter) {
            currentFilter = filter;
            loadTasks();
        }

        // Show all tasks
        function showAllTasks() {
            currentFilter = 'all';
            loadTasks();
        }

        // Open add task modal
        function openAddTaskModal() {
            document.getElementById('task-modal-title').textContent = 'Add New Task';
            document.getElementById('add-task-modal').classList.remove('hidden');
            
            // Reset form
            document.getElementById('task-name').value = '';
            document.getElementById('task-description').value = '';
            
            // Set default due date to tomorrow
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('task-due-date').value = tomorrow.toISOString().split('T')[0];
            
            document.getElementById('task-priority').value = 'medium';
            document.getElementById('task-status').value = 'pending';
            
            // Load members into assigned to dropdown
            const assignedToSelect = document.getElementById('task-assigned-to');
            assignedToSelect.innerHTML = '';
            
            members.forEach(member => {
                const option = document.createElement('option');
                option.value = member.id;
                option.textContent = member.name;
                assignedToSelect.appendChild(option);
            });
            
            if (members.length > 0) {
                assignedToSelect.value = members[0].id;
            }
            
            currentlyEditingTaskId = null;
        }

        // Close add task modal
        function closeAddTaskModal() {
            document.getElementById('add-task-modal').classList.add('hidden');
        }

        // Confirm add task
        function confirmAddTask() {
            const name = document.getElementById('task-name').value.trim();
            const description = document.getElementById('task-description').value.trim();
            const dueDate = document.getElementById('task-due-date').value;
            const priority = document.getElementById('task-priority').value;
            const status = document.getElementById('task-status').value;
            const assignedTo = parseInt(document.getElementById('task-assigned-to').value);
            
            if (!name || !dueDate) {
                alert('Please fill in all required fields');
                return;
            }
            
            if (currentlyEditingTaskId !== null) {
                // Update existing task
                const taskIndex = tasks.findIndex(t => t.id === currentlyEditingTaskId);
                if (taskIndex !== -1) {
                    tasks[taskIndex] = {
                        ...tasks[taskIndex],
                        name,
                        description,
                        dueDate,
                        priority,
                        status,
                        assignedTo
                    };
                }
            } else {
                // Add new task
                const newTask = {
                    id: tasks.length > 0 ? Math.max(...tasks.map(t => t.id)) + 1 : 1,
                    name,
                    description,
                    dueDate,
                    priority,
                    status,
                    assignedTo,
                    createdAt: new Date().toISOString()
                };
                
                tasks.push(newTask);
            }
            
            loadTasks();
            updateCompletionPercentage();
            closeAddTaskModal();
        }

        // Edit task
        function editTask(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (!task) return;
            
            document.getElementById('task-modal-title').textContent = 'Edit Task';
            document.getElementById('add-task-modal').classList.remove('hidden');
            
            // Fill form with task data
            document.getElementById('task-name').value = task.name;
            document.getElementById('task-description').value = task.description || '';
            document.getElementById('task-due-date').value = task.dueDate;
            document.getElementById('task-priority').value = task.priority;
            document.getElementById('task-status').value = task.status;
            
            // Load members into assigned to dropdown
            const assignedToSelect = document.getElementById('task-assigned-to');
            assignedToSelect.innerHTML = '';
            
            members.forEach(member => {
                const option = document.createElement('option');
                option.value = member.id;
                option.textContent = member.name;
                assignedToSelect.appendChild(option);
            });
            
            assignedToSelect.value = task.assignedTo;
            
            currentlyEditingTaskId = taskId;
        }

        // Confirm delete task
        function confirmDeleteTask(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (!task) return;
            
            document.getElementById('delete-confirmation-message').textContent = 
                `Are you sure you want to delete the task "${task.name}"? This action cannot be undone.`;
            
            deleteAction = () => {
                tasks = tasks.filter(t => t.id !== taskId);
                loadTasks();
                updateCompletionPercentage();
                closeConfirmDeleteModal();
            };
            
            document.getElementById('confirm-delete-modal').classList.remove('hidden');
        }

        // Open add member modal
        function openAddMemberModal() {
            document.getElementById('member-modal-title').textContent = 'Add New Member';
            document.getElementById('add-member-modal').classList.remove('hidden');
            
            // Reset form
            document.getElementById('member-name').value = '';
            document.getElementById('member-email').value = '';
            document.getElementById('member-role').value = 'member';
            document.getElementById('member-color').value = 'indigo';
            
            // Highlight default color
            document.querySelectorAll('#add-member-modal .rounded-full').forEach(el => {
                el.classList.remove('border-indigo-500');
                el.classList.add('border-transparent');
            });
            document.querySelector('#add-member-modal .bg-indigo-500').classList.remove('border-transparent');
            document.querySelector('#add-member-modal .bg-indigo-500').classList.add('border-indigo-500');
            
            currentlyEditingMemberId = null;
        }

        // Close add member modal
        function closeAddMemberModal() {
            document.getElementById('add-member-modal').classList.add('hidden');
        }

        // Confirm add member
        function confirmAddMember() {
            const name = document.getElementById('member-name').value.trim();
            const email = document.getElementById('member-email').value.trim();
            const role = document.getElementById('member-role').value;
            const color = document.getElementById('member-color').value;
            
            if (!name || !email) {
                alert('Please fill in all required fields');
                return;
            }
            
            // Simple email validation
            if (!email.includes('@') || !email.includes('.')) {
                alert('Please enter a valid email address');
                return;
            }
            
            if (currentlyEditingMemberId !== null) {
                // Update existing member
                const memberIndex = members.findIndex(m => m.id === currentlyEditingMemberId);
                if (memberIndex !== -1) {
                    members[memberIndex] = {
                        ...members[memberIndex],
                        name,
                        email,
                        role,
                        color
                    };
                }
            } else {
                // Add new member
                const newMember = {
                    id: members.length > 0 ? Math.max(...members.map(m => m.id)) + 1 : 1,
                    name,
                    email,
                    role,
                    color,
                    createdAt: new Date().toISOString()
                };
                
                members.push(newMember);
            }
            
            loadMembers();
            
            // Update assigned to dropdown in task modal if open
            if (!document.getElementById('add-task-modal').classList.contains('hidden')) {
                const assignedToSelect = document.getElementById('task-assigned-to');
                assignedToSelect.innerHTML = '';
                
                members.forEach(member => {
                    const option = document.createElement('option');
                    option.value = member.id;
                    option.textContent = member.name;
                    assignedToSelect.appendChild(option);
                });
                
                if (members.length > 0) {
                    assignedToSelect.value = members[0].id;
                }
            }
            
            closeAddMemberModal();
        }

        // Edit member
        function editMember(memberId) {
            const member = members.find(m => m.id === memberId);
            if (!member) return;
            
            document.getElementById('member-modal-title').textContent = 'Edit Member';
            document.getElementById('add-member-modal').classList.remove('hidden');
            
            // Fill form with member data
            document.getElementById('member-name').value = member.name;
            document.getElementById('member-email').value = member.email;
            document.getElementById('member-role').value = member.role;
            document.getElementById('member-color').value = member.color;
            
            // Highlight selected color
            document.querySelectorAll('#add-member-modal .rounded-full').forEach(el => {
                el.classList.remove('border-indigo-500');
                el.classList.add('border-transparent');
            });
            document.querySelector(`#add-member-modal .bg-${member.color}-500`).classList.remove('border-transparent');
            document.querySelector(`#add-member-modal .bg-${member.color}-500`).classList.add('border-indigo-500');
            
            currentlyEditingMemberId = memberId;
        }

        // Select member color
        function selectMemberColor(color) {
            document.getElementById('member-color').value = color;
            
            // Update UI
            document.querySelectorAll('#add-member-modal .rounded-full').forEach(el => {
                el.classList.remove('border-indigo-500');
                el.classList.add('border-transparent');
            });
            document.querySelector(`#add-member-modal .bg-${color}-500`).classList.remove('border-transparent');
            document.querySelector(`#add-member-modal .bg-${color}-500`).classList.add('border-indigo-500');
        }

        // Confirm delete member
        function confirmDeleteMember(memberId) {
            const member = members.find(m => m.id === memberId);
            if (!member) return;
            
            const tasksAssigned = tasks.filter(t => t.assignedTo === memberId).length;
            
            document.getElementById('delete-confirmation-message').textContent = 
                `Are you sure you want to delete the member "${member.name}"? ` + 
                (tasksAssigned > 0 ? `This member has ${tasksAssigned} task(s) assigned. These tasks will become unassigned. ` : '') +
                `This action cannot be undone.`;
            
            deleteAction = () => {
                // Remove member
                members = members.filter(m => m.id !== memberId);
                
                // Unassign tasks from this member
                tasks.forEach(task => {
                    if (task.assignedTo === memberId) {
                        task.assignedTo = null;
                    }
                });
                
                loadMembers();
                loadTasks();
                closeConfirmDeleteModal();
            };
            
            document.getElementById('confirm-delete-modal').classList.remove('hidden');
        }

        // Close confirm delete modal
        function closeConfirmDeleteModal() {
            document.getElementById('confirm-delete-modal').classList.add('hidden');
            deleteAction = null;
        }

        // Execute delete
        function executeDelete() {
            if (deleteAction) {
                deleteAction();
            }
        }

        // Confirm reset all data
        function confirmResetData() {
            document.getElementById('delete-confirmation-message').textContent = 
                `Are you sure you want to reset ALL data? This will delete all tasks and members and cannot be undone.`;
            
            deleteAction = () => {
                tasks = [];
                members = [];
                loadTasks();
                loadMembers();
                updateCompletionPercentage();
                closeConfirmDeleteModal();
            };
            
            document.getElementById('confirm-delete-modal').classList.remove('hidden');
        }

        // Export data
        function exportData(format) {
            const data = {
                tasks: tasks,
                members: members,
                exportedAt: new Date().toISOString()
            };
            
            if (format === 'excel') {
                exportToExcel(data);
            } else {
                exportToJSON(data);
            }
        }

        // Export to Excel
        function exportToExcel(data) {
            // Create workbook
            const wb = XLSX.utils.book_new();
            
            // Add tasks sheet
            const tasksData = [
                ["ID", "Name", "Description", "Due Date", "Priority", "Status", "Assigned To", "Created At"],
                ...data.tasks.map(task => [
                    task.id,
                    task.name,
                    task.description,
                    task.dueDate,
                    task.priority,
                    task.status,
                    task.assignedTo,
                    task.createdAt
                ])
            ];
            
            const tasksWs = XLSX.utils.aoa_to_sheet(tasksData);
            XLSX.utils.book_append_sheet(wb, tasksWs, "Tasks");
            
            // Add members sheet
            const membersData = [
                ["ID", "Name", "Email", "Role", "Color", "Created At"],
                ...data.members.map(member => [
                    member.id,
                    member.name,
                    member.email,
                    member.role,
                    member.color,
                    member.createdAt
                ])
            ];
            
            const membersWs = XLSX.utils.aoa_to_sheet(membersData);
            XLSX.utils.book_append_sheet(wb, membersWs, "Members");
            
            // Generate file and download
            XLSX.writeFile(wb, `TaskManager_Export_${new Date().toISOString().split('T')[0]}.xlsx`);
        }

        // Export to JSON
        function exportToJSON(data) {
            const jsonStr = JSON.stringify(data, null, 2);
            const blob = new Blob([jsonStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `TaskManager_Export_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Import data
        function importData() {
            document.getElementById('import-modal').classList.remove('hidden');
        }

        // Close import modal
        function closeImportModal() {
            document.getElementById('import-modal').classList.add('hidden');
        }

        // Process import
        function processImport() {
            const fileInput = document.getElementById('import-file');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('Please select a file to import');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (!data.tasks || !data.members) {
                        throw new Error('Invalid data format');
                    }
                    
                    // Replace current data with imported data
                    tasks = data.tasks;
                    members = data.members;
                    
                    loadTasks();
                    loadMembers();
                    updateCompletionPercentage();
                    
                    closeImportModal();
                    alert('Data imported successfully!');
                } catch (error) {
                    console.error('Error importing data:', error);
                    alert('Error importing data. Please make sure you selected a valid JSON file.');
                }
            };
            reader.readAsText(file);
        }
    </script>
    
</body>
</html>